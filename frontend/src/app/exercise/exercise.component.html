<div class="container-fluid container-fluid-styling">
   <!-- header -->
  <div class="badge-dark container sticky-top max-width" *ngIf="statistic && exercise && config">
    <div class="row">
      <div class="col-2 text-left padding-left-0">
        <button class="btn btn-dark margin-3" (click)="back()" *ngIf="!conditions.inEditMode && !conditions.loading">
          <fa-icon [icon]="faChevronLeft"></fa-icon>
        </button>
        <button class="btn btn-dark margin-3" (click)="cancel()" *ngIf="conditions.inEditMode">
          cancel
        </button>
      </div>
      <div class="col-8 text-center">
        <span class="text-white header-text-style">{{config.getName()}}</span>
      </div>
      <div class="col-2 text-right header-rigth-column-style">
        <button class="btn btn-dark margin-3" *ngIf="conditions.inEditMode" (click)="delete()" data-toggle="modal" data-target="#modalDialog">
          <fa-icon [icon]="faTrash"></fa-icon>
        </button>
      </div>
    </div>
  </div>

  <app-alert [error]="error"></app-alert>
  <app-spinner [loading]="conditions.loading"></app-spinner>

  <!-- body -->
  <div class="container exercise-body max-width" *ngIf="statistic && exercise && config">
    <!-- progress bar -->
    <app-progress-bar [percent]="statistic.getProgress()" [striped]="true" [disable]="conditions.loading">
      <span [class]="conditions.loading ? 'text-disabled': 'text-enabled'">{{statistic.getProgress()}} %</span>
    </app-progress-bar>

    <!-- points -->
    <div class="row" [class]="conditions.loading ? 'text-disabled': 'text-enabled'">
      <div class="col-4 text-center">
        raw
      </div>
      <div class="col-4 text-center">
        points
      </div>
      <div class="col-4 text-center">
        quota
      </div>
    </div>
    <div class="row" [class]="conditions.loading ? 'text-disabled': 'text-enabled'">
      <div class="col-4 text-center" >
        {{exercise.getRawPoints()}} {{config.getItem()}}
      </div>
      <div class="col-4 text-center">
        {{exercise.getTotalPoints()}}
      </div>
      <div class="col-4 text-center">
        <div class="container quota-style" [ngClass]="calcQuotaColor()">
          {{statistic.getQuota()}} %
        </div>
      </div>
    </div>

    <div class="padding-top-40"></div>
    <!-- reps table -->
    <div class="container max-width-600">
      <table class="table table-sm table-borderless"
           *ngIf="config.isWithReps() && reps.length>0">
      <tbody>
      <tr *ngFor="let rep of reps; let i = index">
        <td class="text-center padding-top-bottom-0">
            <div class="row reps-table-row">
            <div class="col-1 reps-table-first-column">
            </div>
            <div class="col-4 text-center padding-0">
              <input type="text"
                     class="exercise-input"
                     [class]="conditions.loading ? 'exercise-input-disabled': 'exercise-input-enabled'"
                     value="{{rep.getWeight()}}"
                     placeholder="weight"
                     required
                     [disabled]="!conditions.inEditMode"
                     (keyup)="changeWeight(i, $event)"
                     (focusin)="removePostfix($event)"
                     (focusout)="addPostfix('kg', $event)">
            </div>
            <div class="col-1 text-center padding-0" [class]="conditions.loading ? 'text-disabled': 'text-enabled'">
              <p class="margin-top-10">X</p>
            </div>
            <div class="col-4 text-center padding-0">
              <input type="text"
                     class="exercise-input"
                     [class]="conditions.loading ? 'exercise-input-disabled': 'exercise-input-enabled'"
                     value="{{rep.getReps()}}"
                     (keyup)="changeReps(i, $event)"
                     placeholder="reps"
                     [disabled]="!conditions.inEditMode"
                     required>
            </div>
            <div class="col-2 text-left col-delete-reps">
              <button class="btn btn-light btn-delete-reps"
                      (click)="deleteReps(i)"
                      *ngIf="conditions.inEditMode">
                <fa-icon [icon]="faTrash"></fa-icon>
              </button>
            </div>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
    </div>
    <!-- + button -->
    <div class="container max-width-600" *ngIf="conditions.inEditMode && config.isWithReps()">
      <div class="row">
        <div class="col-1 reps-first-column"></div>
        <div class="col-4 padding-0"></div>
        <div class="col-1 padding-0"></div>
        <div class="col-4 padding-0"></div>
        <div class="col-2 text-left reps-last-column" *ngIf="noEmptyReps() && reps.length < 6">
          <button class="btn btn-light btn-transparent" (click)="addReps()">
            <fa-icon [icon]="faPlus"></fa-icon>
          </button>
        </div>
      </div>
    </div>

    <!-- input for exercises without reps -->
    <div class="container max-width-600" *ngIf="!config.isWithReps()">
      <input class="text" class="exercise-input"
             [class]="conditions.loading ? 'exercise-input-disabled': 'exercise-input-enabled'"
             value="{{rawPoints}}"
             placeholder="{{config ? config.getItem(): ''}}"
             [disabled]="!conditions.inEditMode"
             required
             (keyup)="changeRawPoints($event)">
    </div>

    <!-- footer -->
    <div class="container sticky-bottom">
      <button class="btn btn-light btn-exercise-operate" (click)="edit()"
              *ngIf="!conditions.inEditMode && !conditions.loading">edit
      </button>
      <button class="btn btn-success btn-exercise-operate" (click)="save()"
              *ngIf="conditions.inEditMode" [disabled]="!canSave()">save
      </button>
    </div>
  </div>
</div>
